<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Funko Pops Personalizados | Artesan√≠a √∫nica</title>
    <meta name="description" content="Funko Pops personalizados hechos a mano. Dise√±os exclusivos: bodas, cantantes, custom y pel√≠culas." />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400&family=Source+Serif+4:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
  </head>
  <body>
    <header class="header">
      <div class="container header__content">
        <a href="#inicio" class="header__brand">
          <img src="{{ logo_url }}" alt="Funko Pops Custom" class="header__logo-img" width="48" height="48" />
          <div>
            <span class="header__title">Funko Pops Custom</span>
            <span class="header__subtitle">Artesan√≠a hecha a mano</span>
          </div>
        </a>
        <nav class="nav" aria-label="Navegaci√≥n principal">
          <button class="nav__toggle" aria-label="Abrir men√∫" id="navToggle"><span></span><span></span></button>
          <ul class="nav__list" id="navList">
            <li><a href="#como-funciona">C√≥mo funciona</a></li>
            <li><a href="#dise√±os">Dise√±os</a></li>
            <li><a href="#elegir">Descubre nuestro trabajo</a></li>
          </ul>
        </nav>
        <div class="header__right">
          <a href="https://gemini.google.com" target="_blank" rel="noopener noreferrer" class="header__gemini-btn" aria-label="Abrir Gemini para crear referencia con IA">‚ú® IA</a>
          <a href="{{ url_for('carrito') }}" class="header__cart" aria-label="Ver carrito">
            <span class="header__cart-icon">üõí</span>
            <span class="header__cart-count" id="cartCount">{{ cart_count }}</span>
          </a>
        </div>
      </div>
    </header>

    <main>
      <!-- Hero -->
      <section id="inicio" class="hero">
        <div class="container hero__wrap">
          <div class="hero__col hero__col--img">
            <div class="hero__image-wrap">
              <img src="{{ hero_image }}" alt="Funko Pops personalizados" class="hero__image" width="420" height="315" />
            </div>
          </div>
          <div class="hero__col hero__col--text">
            <h1 class="hero__title">Funko Pops personalizados</h1>
            <p class="hero__desc">
              Creamos figuras √∫nicas hechas a mano: novios para tu boda, tu artista favorito, tu mascota, personajes de cine o un dise√±o 100 % personal. Cada pieza se esculpe, pinta y acaba en nuestro taller.
            </p>
            <div class="hero__actions">
              <a href="#dise√±os" class="button">Ver dise√±os</a>
              <a href="{{ url_for('carrito') }}" class="button button--outline">Ver carrito</a>
            </div>
          </div>
          <div class="hero__col hero__col--video">
            <div class="hero__video-wrap">
              <video autoplay muted loop playsinline preload="auto" class="hero__video" aria-label="V√≠deo del proceso">
                <source src="{{ hero_video }}" type="video/mp4" />
              </video>
            </div>
          </div>
        </div>
      </section>

      <!-- C√≥mo funciona -->
      <section id="como-funciona" class="section section--steps">
        <div class="container">
          <header class="section__header">
            <h2>¬øC√≥mo funciona?</h2>
            <p>Te lo ponemos muy f√°cil: en tres pasos tendr√°s tu Funko en casa.</p>
          </header>
          <div class="steps">
            <div class="step">
              <span class="step__num">1</span>
              <h3 class="step__title">Elige y a√±ade al carrito</h3>
              <p class="step__text">Elige una categor√≠a aqu√≠ abajo y a√±√°dela al carrito. Si quieres una referencia con IA, usa el bot√≥n ‚ú® IA del encabezado para abrir Gemini en la misma p√°gina y genera tu idea. Luego podr√°s pegarla en la ficha del carrito.</p>
            </div>
            <div class="step">
              <span class="step__num">2</span>
              <h3 class="step__title">Rellena la ficha en el carrito</h3>
              <p class="step__text">En el carrito rellena tus datos: descripci√≥n del Funko, sube im√°genes de referencia si tienes y tu direcci√≥n de env√≠o. Esos datos se nos env√≠an por correo y t√∫ pasas al pago.</p>
            </div>
            <div class="step">
              <span class="step__num">3</span>
              <h3 class="step__title">Paga y te lo enviamos</h3>
              <p class="step__text">Paga con tarjeta o PayPal y nosotros te enviamos tu figura a casa. Env√≠os a toda Espa√±a e internacionales.</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Galer√≠a -->
      <section id="dise√±os" class="section section--cream">
        <div class="container">
          <header class="section__header">
            <h2>Nuestros dise√±os</h2>
            <p>Elige una categor√≠a, mira los ejemplos y a√±ade al carrito la que te guste. Cada una tiene su precio.</p>
          </header>
          <div class="grupos" id="grupos">
            {% for grupo in grupos %}
            <details class="grupo" data-grupo="{{ grupo.id }}"{% if not grupo.resto %} data-sin-resto{% endif %}>
              <summary class="grupo__portada">
                <span class="grupo__img-wrap">
                  <img src="{{ grupo.imagen_principal.url }}" alt="{{ grupo.nombre }}" loading="lazy" width="320" height="320" />
                  {% if grupo.resto %}<span class="grupo__ver-mas">Ver m√°s</span>{% endif %}
                </span>
                <span class="grupo__info">
                  <span class="grupo__nombre">{{ grupo.nombre }}</span>
                  <span class="grupo__desc">{{ grupo.descripcion }}</span>
                  <span class="grupo__precio">{{ grupo.precio }} ‚Ç¨</span>
                  <form action="{{ url_for('carrito_add_product') }}" method="post" class="grupo__add" onclick="event.stopPropagation()">
                    <input type="hidden" name="grupo_id" value="{{ grupo.id }}" />
                    <button type="submit" class="button button--small button--cart">A√±adir al carrito</button>
                  </form>
                </span>
              </summary>
              {% if grupo.resto %}
              <div class="grupo__resto">
                <p class="grupo__resto-titulo">M√°s ejemplos de {{ grupo.nombre | lower }}</p>
                <div class="grupo__galeria">
                  {% for item in grupo.resto %}
                  <figure class="grupo__thumb">
                    <img src="{{ item.url }}" alt="{{ item.titulo }}" loading="lazy" />
                    <figcaption>{{ item.titulo }}</figcaption>
                  </figure>
                  {% endfor %}
                </div>
              </div>
              {% endif %}
            </details>
            {% endfor %}
          </div>
        </div>
      </section>

      <!-- Elegir dise√±o -->
      <section id="elegir" class="section section--sepia">
        <div class="container">
          <header class="section__header">
            <h2>Descubre nuestro trabajo</h2>
            <p>Selecciona el dise√±o que m√°s se acerque a lo que quieres para tu encargo personalizado.</p>
          </header>
          <div class="picker" id="picker">
            {% for item in todas_imagenes %}
            <button type="button" class="picker__card" data-dise√±o="{{ item.titulo }}" data-url="{{ item.url }}" aria-pressed="false">
              <span class="picker__img-wrap"><img src="{{ item.url }}" alt="{{ item.titulo }}" loading="lazy" /></span>
              <span class="picker__label">{{ item.titulo }}</span>
            </button>
            {% endfor %}
          </div>
          <p class="picker__hint" id="pickerHint">Haz clic en una imagen para seleccionar tu dise√±o de referencia.</p>
          <p class="picker__selected" id="pickerSelected" hidden>
            Dise√±o elegido: <strong id="pickerSelectedName"></strong>
            <a href="{{ url_for('carrito') }}" class="link">Ir al carrito ‚Üí</a>
          </p>
        </div>
      </section>
    </main>

    <footer class="footer">
      <div class="container footer__content">
        <p>¬© <span id="year"></span> Funko Pops Custom. Artesan√≠a hecha a mano.</p>
        <div class="footer__links">
          <a href="#!">Aviso legal</a>
          <a href="#!">Privacidad</a>
        </div>
      </div>
    </footer>

    <script>
      (function () {
        var navToggle = document.getElementById('navToggle');
        var navList = document.getElementById('navList');
        if (navToggle && navList) {
          navToggle.addEventListener('click', function () { navList.classList.toggle('nav__list--open'); });
          navList.querySelectorAll('a').forEach(function (link) {
            link.addEventListener('click', function () { navList.classList.remove('nav__list--open'); });
          });
        }
        var yearSpan = document.getElementById('year');
        if (yearSpan) yearSpan.textContent = String(new Date().getFullYear());

        var formDise√±o = document.getElementById('formDise√±o');
        var pickerHint = document.getElementById('pickerHint');
        var pickerSelected = document.getElementById('pickerSelected');
        var pickerSelectedName = document.getElementById('pickerSelectedName');
        if (document.querySelectorAll('.picker__card').length) {
          document.querySelectorAll('.picker__card').forEach(function (btn) {
            btn.addEventListener('click', function () {
              document.querySelectorAll('.picker__card').forEach(function (b) {
                b.classList.remove('picker__card--on');
                b.setAttribute('aria-pressed', 'false');
              });
              this.classList.add('picker__card--on');
              this.setAttribute('aria-pressed', 'true');
              var nombre = this.getAttribute('data-dise√±o');
              if (formDise√±o) formDise√±o.value = nombre;
              if (pickerSelectedName) pickerSelectedName.textContent = nombre;
              if (pickerHint) pickerHint.hidden = true;
              if (pickerSelected) pickerSelected.hidden = false;
            });
          });
        }

      })();
    </script>
  </body>
</html>
